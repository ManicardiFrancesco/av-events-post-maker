<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Instagram Post Maker</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-title">
        <h1>Instagram Post Maker</h1>
        <button id="help-button" class="help-button" type="button" title="How this works">
          ?
        </button>
      </div>
      <p>Fill in the details, set a background, and download a PNG.</p>
    </header>

    <main class="layout">
      <section class="panel" aria-label="Input controls">
        <details class="section" data-section="grid" open>
          <summary>Grid</summary>
          <div class="section-body">
            <label class="field">
              <span>Columns</span>
              <input id="grid-cols" type="number" min="1" max="6" value="2" />
            </label>
            <label class="field">
              <span>Rows</span>
              <input id="grid-rows" type="number" min="1" max="6" value="2" />
            </label>
            <label class="field">
              <span>Grid offset X</span>
              <div class="slider">
                <input id="grid-offset-x" type="range" min="-400" max="400" value="0" />
                <input
                  id="grid-offset-x-number"
                  class="slider-number"
                  type="number"
                  min="-400"
                  max="400"
                  value="0"
                />
              </div>
            </label>
            <label class="field">
              <span>Grid offset Y</span>
              <div class="slider">
                <input id="grid-offset-y" type="range" min="-400" max="400" value="0" />
                <input
                  id="grid-offset-y-number"
                  class="slider-number"
                  type="number"
                  min="-400"
                  max="400"
                  value="0"
                />
              </div>
            </label>
            <label class="field">
              <span>Row spacing</span>
              <div class="slider">
                <input id="grid-row-gap" type="range" min="0" max="160" value="20" />
                <input
                  id="grid-row-gap-number"
                  class="slider-number"
                  type="number"
                  min="0"
                  max="160"
                  value="20"
                />
              </div>
            </label>
            <label class="field">
              <span>Column spacing</span>
              <div class="slider">
                <input id="grid-column-gap" type="range" min="0" max="160" value="28" />
                <input
                  id="grid-column-gap-number"
                  class="slider-number"
                  type="number"
                  min="0"
                  max="160"
                  value="28"
                />
              </div>
            </label>
          </div>
        </details>

        <details class="section" data-section="events" open>
          <summary>Events</summary>
          <div class="section-body">
            <div id="events" class="events span-full"></div>
            <button
              id="add-event"
              class="secondary span-full"
              type="button"
              title="Add another event block"
            >
              Add Event
            </button>
          </div>
        </details>

        <details class="section" data-section="typography" open>
          <summary>Typography</summary>
          <div class="section-body">
            <label class="field">
              <span>Max event font size</span>
              <div class="slider">
                <input id="font-max" type="range" min="24" max="200" value="60" />
                <input
                  id="font-max-number"
                  class="slider-number"
                  type="number"
                  min="24"
                  max="200"
                  value="60"
                />
              </div>
            </label>
          </div>
        </details>

        <details class="section" data-section="presets" open>
          <summary>Presets</summary>
          <div class="section-body">
            <label class="field">
              <span>Preset Name</span>
              <input
                id="preset-name"
                type="text"
                maxlength="40"
                placeholder="Weekend markets"
              />
            </label>
            <div class="preset-actions span-full">
              <button id="save-preset" class="secondary" type="button" title="Save as a preset">
                Save Preset
              </button>
              <button
                id="clear-state"
                class="secondary danger"
                type="button"
                title="Clear autosaved state"
              >
                Clear Saved State
              </button>
            </div>
            <div id="presets-list" class="presets-list span-full"></div>
            <label class="field span-full">
              <span>Preset JSON</span>
              <textarea
                id="preset-json"
                rows="6"
                placeholder='{"name":"Weekend markets","data":{...}}'
              ></textarea>
            </label>
            <div class="preset-actions span-full">
              <button
                id="copy-json"
                class="secondary"
                type="button"
                title="Copy the current layout JSON"
              >
                Copy Current JSON
              </button>
              <button
                id="import-preset"
                class="secondary"
                type="button"
                title="Apply the JSON from the box"
              >
                Apply JSON
              </button>
            </div>
          </div>
        </details>

        <details class="section" data-section="header-footer" open>
          <summary>Header / Footer</summary>
          <div class="section-body">
            <label class="field field-inline">
              <span>Show header row</span>
              <input id="header-enabled" type="checkbox" />
            </label>
            <label class="field">
              <span>Header text</span>
              <input id="header-text" type="text" maxlength="60" placeholder="Upcoming events" />
            </label>
            <label class="field field-inline">
              <span>Show footer row</span>
              <input id="footer-enabled" type="checkbox" />
            </label>
            <label class="field">
              <span>Footer text</span>
              <input id="footer-text" type="text" maxlength="60" placeholder="See you there" />
            </label>
          </div>
        </details>

        <details class="section" data-section="background" open>
          <summary>Background</summary>
          <div class="section-body">
            <label class="field">
              <span>Image URL</span>
              <input id="bg-url" type="text" placeholder="https://..." />
            </label>
            <label class="field">
              <span>Upload Image</span>
              <input id="bg-file" type="file" accept="image/*" />
            </label>
          </div>
        </details>

        <button
          id="download"
          class="primary"
          type="button"
          title="Export the current preview as a PNG"
        >
          Download PNG
        </button>
      </section>

      <section class="preview" aria-label="Preview">
        <div class="preview-frame">
          <div id="card" class="card" role="img" aria-label="Instagram post preview">
            <div class="card-content">
              <div id="header-row" class="row header-row" hidden></div>
              <div id="grid" class="grid"></div>
              <div id="footer-row" class="row footer-row" hidden></div>
            </div>
          </div>
        </div>
        <p class="hint">Preview size: 1080x1350</p>
      </section>
    </main>

    <div id="help-modal" class="modal" hidden>
      <div class="modal-overlay" data-action="close"></div>
      <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="help-title">
        <div class="modal-header">
          <h2 id="help-title">Quick Workflow</h2>
          <button id="help-close" class="secondary" type="button" title="Close">
            Close
          </button>
        </div>
        <div class="modal-body">
          <p>You can edit the text directly on the preview or in the Events list.</p>
          <p>
            For fast edits: click “Copy Current JSON”, paste it into ChatGPT, ask it to
            fill/update the event info, then paste the JSON back here and click “Apply JSON”.
          </p>
          <p>
            Remember to update the background image so it matches the right country before
            exporting.
          </p>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
